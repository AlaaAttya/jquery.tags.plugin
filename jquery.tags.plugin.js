/**
 * @author Alaa Attya Mohamed <alaa.attya@pngine.com>
 * */

(function(e){e.fn.tags=function(t){var n=e.extend({stylingClass:"highlight",valueSelector:"content"},t);e(this).attr("contenteditable","true");if(n.valueSelector.charAt(0)==="#")e(this).before("<input type='hidden' id='"+n.valueSelector.substr(1,n.valueSelector.length)+"'>");else e(this).before("<input type='hidden' class='"+n.valueSelector+"'>");e(this).keydown(function(t){switch(t.keyCode){case 8:if(e.trim(decodeURI(e(this).clone().children().remove().end().text())).length===0){if(e(this).children().length>0){var r="";if(n.valueSelector.charAt(0)==="#"){r=e(n.valueSelector).val();var i=r.lastIndexOf(e("."+n.stylingClass).last().text());e(n.valueSelector).val(r.substring(0,i-1))}else{r=e("."+n.valueSelector).val();var i=r.lastIndexOf(e("."+n.stylingClass).last().text());e("."+n.valueSelector).val(r.substring(0,i-1))}e("."+n.stylingClass).last().remove();return false}}break;case 13:return false;break;case 32:var s=e(this).children();var o=e.trim(decodeURI(e(this).clone().children().remove().end().text()));if(o.length>0){e(this).html("");e(this).text("");if(e(this).size()>0){e(this).append(s);e(this).append("<span contenteditable=false class='"+n.stylingClass+"' style='position:relative;margin-top:-3px;float:left;margin-right:5px'>"+o+"</span>")}else{e(this).html("<span contenteditable=false class='"+n.stylingClass+"' style='position:relative;margin-top:-3px;float:left;margin-right:5px'>"+o+"</span>")}if(n.valueSelector.charAt(0)==="#")e(n.valueSelector).val(e(n.valueSelector).val()+" "+o);else e("."+n.valueSelector).val(("."+n.valueSelector).val()+" "+o)}break}})}})(jQuery)
